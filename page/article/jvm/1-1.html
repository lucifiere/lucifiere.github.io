<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <!-- title -->
    <title>王贤兑的技术博客</title>

    <!-- meta -->
    <meta charset="UTF-8">

    <!-- links -->
    <link rel="stylesheet" type="text/css" media="screen" href="../../../css/style.css">

    <!-- scripts -->

    <!-- IE Hacks -->
    <!--[if IE]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
</head>
<body class="home blog">

<!-- header -->
<header>
    <div id="light">
        <div class="container_16">
            <h1 class="grid_8" style="font-size: 45px"><a href="../../../index.html">Code Craft Of XD.Wang</a></h1>
            <nav class="grid_8">
                <ul id="menu-menu" class="menu">
                    <li><a href="../../../index.html">主页</a></li>
                    <li><a href="../../../page/list/blog.html">博客</a></li>
                    <li><a href="../../../page/list/me.html">ME</a></li>
                </ul>
            </nav>
        </div>
    </div>
</header>
<div class="copyrights">作者：王贤兑</div>

<!-- wrapper -->
<div id="wrapper">
    <div class="container_16">
        <section id="posts" class="prefix_1 grid_9">

            <article>
                <h2>JVM基础知识概述</h2>
                <p class="info">March 13th, 2017 | by <span><a href="#" rel="author">XD.Wang</a></span> | jvm
                </p>
                <div class="time"><p>Mar<br><span>13</span></p></div>

                <div class="text">
                    <p><img src="../../../images/article/jvm/1-1.jpg" height="250" width="510"></p>
                    <h4>概述</h4>
                    <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;JVM被定义为一个可执行字节码的虚拟机器，Java、Groovy、Scala等语言可基于JVM定义的虚拟机执行。
                    市面上实现了JVM规范的虚拟机有很多，最为著名的是HotSpot VM。学习Java虚拟机有助于理解Java、Groovy等语言的底层工作机制，写出性能更好的应用。
                    同时，JVM相关知识还是Java性能调优、高并发程序设计等理论的基础。</p>

                    <h4>JVM的内存布局</h4>
                    <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>非堆 . 程序计数器：</b>
                        程序计数器用来存储线程执行到的指令位置，JVM根据这个内存区域中的值来寻找需要执行的下一条字节码命令，
                        计数器域是每个线程私有的，当发生线程切换时，它保存的状态保证各线程能恢复到正确的位置。</p>
                    <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>非堆 . 虚拟机栈：</b>
                        虚拟机栈用来存放方法执行时的相关数据。每个方法执行时都会在虚拟机栈中创建一个栈帧，其中包含局部变量表（编译时能确定的变量）和其它诸如操作数栈、方法出口等重要的方法执行信息，
                        方法执行的过程就是一个栈帧入栈出栈的过程，虚拟机栈也是各个线程私有的。</p>
                    <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>非堆 . 本地方法栈：</b>本地方法栈和虚拟机栈类似，只是它用来管理本地方法的调用，HotSpot
                        JVM中虚拟机栈和本地方法栈是同一块区域。</p>
                    <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>堆：</b>
                        堆是Java内存分配最大的一块区域，属于线程公用区域，所有创建的对象及数组都分布在这个区域，它是垃圾收集器主要的管理目标，从垃圾回收的角度来看Java堆还可以被细分为更小的区域：
                        新生代区、老年代区。Java堆可以是不连续的物理空间，它通常是可扩展的。</p>
                    <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>非堆 . 方法区：</b>这个区域用来存放被类加载器加载了的类信息、静态变量、常量、Class对象（Hotspot）等信
                        息，也是线程公用的。虚拟机规范指定方法区为堆的一个逻辑区域，但在HotSpot虚拟机的实现中，方法区和堆是同一个区域，
                        只是本该被放入方法区的数据被指定为永久代。这样做可以简化GC管理的设计，但会带来内存泄漏的问题。</p>
                    <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>非堆 . 方法区 . 运行时常量池：</b>这个区域是方法区的一部分，用来保存编译时生成的各种字面值和符号引用。</p>
                    <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>非堆 . 直接内存：</b>
                        严格来说直接内存是不是Java内存区域的一部分，它是本地函数库分配出来的一段堆外内存，通过内存映射方式（通过避免在本地内存和虚拟机内存间来回复制数据来提高IO效率）
                        实现的IO操作会用到直接内存（比如NIO）</p>
                    <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>非堆 . 代码缓存区：</b>JVM用来保存JIT编译后的代码和JNI代码的一段内存 </p>

                    <h4>类加载机制</h4>
                    <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;类加载是指：VM将用来描述类信息的Class文件通过类加载器加载到内存，并通过验证、解析、初始化，最终形成可以被JVM直接使用的Java类型。</p>
                    <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;类加载有三个过程：
                        <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;I. 通过符号引用的全限定名找到对应的Class字节流，常见的获取来源:
                    <ul>
                        <li>Class文件</li>
                        <li>网络（代表技术applet）</li>
                        <li>zip包（war、jar、ear格式的基础）</li>
                        <li>运行时动态计算（动态代理技术的基础）</li>
                        <li>其他文件生成（如JSP）</li>
                    </ul>
                    <p>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;II. 将字节流中类的静态存储结构转化为方法区的运行时存储结构
                        <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;III. 创建Class对象作为访问类信息的入口
                    </p>
                    <p>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;类加载器的工作原理：JVM的类加载器分为三类，双亲等级从高到低分别是BootstrapCL、ExtensionCL和ApplicationCL，
                        各加载lib、lib\ext、classpath三个路径下的类文件，其中BootstrapCL属于JVM的一部分，ExtensionCL和ApplicationCL属于JAVA库，
                        可以被用户直接使用。
                    </p>
                    <p>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;JAVA的类加载采用双亲委派模型来实现，即每个加载器在加载之前，都会先询问父加载器是否能够完成加载工作，若父加载器可以处理，
                        则交给父加载器处理，若父加载器无法处理，则自己加载，由于过程是递归的，所以无论使用哪个加载器加载，都会先判断是否能被BootstrapCL加载。
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;这样的机制可以保证JAVA的基础机制，保持JAVA工作需要的层次特性。
                    </p>

                </div>
                <div class="clear"></div>
            </article>

        </section>

        <aside class="prefix_1 grid_5">

            <!-- Categories-->
            <h4>Categories</h4>
            <ul class="categories">
                <li><a href="../../../page/list/lang.html">语言</a></li>
                <li><a href="../../../page/list/algorithm.html">算法</a></li>
                <li><a href="../../../page/list/framework.html">框架</a></li>
                <li><a href="../../../page/list/database.html">数据库</a></li>
                <li><a href="../../../page/list/arch.html">架构</a></li>
                <li><a href="../../../page/list/jvm.html">虚拟机</a></li>
                <li><a href="../../../page/list/bigdata.html">大数据</a></li>
                <li><a href="../../../page/list/tool.html">工具</a></li>
            </ul>
            <div class="clear"></div>
            <hr>

            <!-- article -->
            <h4>Articles</h4>
            <ul class="blogroll">
                <li><a href="../../../page/article/database/1-1.html">MySql性能优化</a></li>
                <li><a href="../../../page/article/database/1-2.html">Binary Log简介</a></li>
                <li><a href="../../../page/article/arch/1-1.html">分布式服务框架概述</a></li>
                <li><a href="../../../page/article/arch/1-2.html">通信框架设计：技术选型和可靠性</a></li>
                <li><a href="../../../page/article/bigdata/1-1.html">Spark快速入门</a></li>
                <li><a href="../../../page/article/jvm/1-1.html">JVM基础知识概述</a></li>
                <li><a href="#">最近发布</a></li>
                <li><a href="#">最近发布</a></li>
                <li><a href="#">最近发布</a></li>
                <li><a href="#">最近发布</a></li>
                <li><a href="#">最近发布</a></li>
                <li><a href="#">最近发布</a></li>
                <li><a href="#">最近发布</a></li>
                <li><a href="#">最近发布</a></li>
            </ul>
            <hr>

        </aside>
    </div>
</div>

<!-- footer -->
<footer>
    <section id="footer_content">
        <div class="container_12">

        </div>
    </section>
    <section id="powered">
        <div class="container_12">
            <p class="grid_10"> code craft by <a href="https://lucifiere.github.io/"
                                                 title="王贤兑的博客" target="_blank"> XD.Wang </a></p>
            <p class="grid_2"><a class="top" href="#">▲ Back to top</a></p>
        </div>
    </section>
</footer>
</body>
</html>